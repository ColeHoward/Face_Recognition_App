#:kivy 1.1.0
Root:
    text_input: text_input
    name: "initial"
    FloatLayout:
        orientation: 'vertical'
        BoxLayout:
            Button:
                pos_hint: {"x":.09, "top":0.6}
                size_hint: 0.35, 0.05
                text: 'Load'
                on_release: root.show_load()
            Button:
                pos_hint: {"x":.09, "top":0.5}
                size_hint: 0.35, 0.05
                text: 'Save'
                on_release: root.show_save()

        FloatLayout:
            TextInput:
                id: text_input
                text: ''
                pos_hint: {"x":.09, "top":0.6}
                size_hint: 0.35, 0.05

            RstDocument:
                text: text_input.text
                show_errors: True
                pos_hint: {"x":.09, "top":0.6}
                size_hint: 0.35, 0.05

<LoadDialog>:
    FloatLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            id: filechooser

        BoxLayout:
            Button:
                pos_hint: {"x":.09, "top":0.6}
                size_hint: 0.35, 0.05
                text: "Cancel"
                on_release: root.cancel()

            Button:
                pos_hint: {"x":.09, "top":0.5}
                size_hint: 0.35, 0.05
                text: "Load"
                on_release: root.load(filechooser.path, filechooser.selection)

<SaveDialog>:
    text_input: text_input
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            id: filechooser
            on_selection: text_input.text = self.selection and self.selection[0] or ''

        TextInput:
            id: text_input
            pos_hint: {"x":.09, "top":0.7}
            size_hint: 0.35, 0.05
            multiline: False

        BoxLayout:
            Button:
                pos_hint: {"x":.09, "top":0.6}
                size_hint: 0.35, 0.05
                text: "Cancel"
                on_release: root.cancel()

            Button:
                pos_hint: {"x":.09, "top":0.5}
                size_hint: 0.35, 0.05
                text: "Save"
                on_release:
                    root.save(filechooser.path, text_input.text)


<MainWindow>:
    name: "main"
    image: image
     FloatLayout:

        Image:
            id: image
            source: ""
            size: 100, 100
            pos_hint: {"center_x": .5, "center_y": .7}
